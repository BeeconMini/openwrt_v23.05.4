// SPDX-License-Identifier: GPL-2.0-or-later

#include "bcm63268.dtsi"

#include <dt-bindings/input/input.h>

/ {
	model = "SmartRG SR505n";
	compatible = "smartrg,sr505n", "brcm,bcm63168", "brcm,bcm63268";

	chosen {
		bootargs = "rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200";
		stdout-path = "serial0:115200n8";
	};

	keys {
		compatible = "gpio-keys-polled";
		#address-cells = <1>;
		#size-cells = <0>;
		poll-interval = <20>;
		
		reset {
			label = "reset";
			gpios = <&pinctrl 32 0>;
			linux,code = <KEY_RESTART>;
			debounce-interval = <60>;
		};

		wps {
                        label = "wps";
                        gpios = <&pinctrl 33 0>;
                        linux,code = <KEY_WPS_BUTTON>;
                        debounce-interval = <60>;
                };

		wlan {
                        label = "wlan";
                        gpios = <&pinctrl 34 0>;
                        linux,code = <KEY_WLAN>;
                        debounce-interval = <60>;
                };
	};
};

&leds {
        status = "okay";

	pinctrl-names = "default";
        pinctrl-0 = <&pinctrl_leds>;

	wps_green@1 {
                reg = <1>;
                active-low;
                label = "green:wps";
        };

	inet_green@8 {
                reg = <8>;
                active-low;
                label = "green:inet";
        };

	lan2_green@9 {
		/* EPHY1 Act */
                reg = <9>;
                brcm,hardware-controlled;
        };

	lan3_green@10 {
		/* EPHY2 Act */
                reg = <10>;
                brcm,hardware-controlled;
        };

	lan4_green@11 {
		/* EPHY3 Act */
                reg = <11>;
                brcm,hardware-controlled;
        };

	lan1_green@12 {
		/* GPHY0 Act */
                reg = <12>;
                brcm,hardware-controlled;
        };

	dsl_green@14 {
                reg = <14>;
                active-low;
                label = "green:dsl";
        };

	inet_red@15 {
                reg = <15>;
                active-low;
                label = "red:inet";
        };

	usb_green@16 {
                reg = <16>;
                active-low;
                label = "green:usb";
        };

	power_green@20 {
                reg = <20>;
                active-low;
                label = "green:power";
		default-state = "on";

        };

	power_red@21 {
                reg = <21>;
                active-low;
                label = "red:power";
        };
};

&pinctrl {
        pinctrl_leds: leds {
                function = "led";
                pins = "gpio1", "gpio8", 
		"gpio9", "gpio10",
		"gpio11", "gpio12",
		"gpio14", "gpio15",
		"gpio16", "gpio20",
		"gpio21";
        };
};

&hsspi {
	status = "okay";

	flash@0 {
		compatible = "jedec,spi-nor";
		spi-max-frequency = <16666667>;
		spi-tx-bus-width = <2>;
		spi-rx-bus-width = <2>;
		reg = <0>;

		#address-cells = <1>;
		#size-cells = <1>;

		partitions {
			compatible = "brcm,bcm963xx-cfe-nor-partitions";
		};
	};
};

&uart0 {
	status = "okay";
};
